<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details</title>
    <!-- Link to your main stylesheet for consistent styling -->
    <link
      rel="stylesheet"
      href="./BlueTrack - Industrial Solutionsssssss_files/styles.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      /* Add any specific styles for the product detail page here */
      .product-detail-container {
        padding: 100px 5% 4rem; /* Adjusted padding to account for fixed navbar */
        max-width: 1000px; /* Increased max-width */
        margin: 0 auto;
        color: var(--text-color);
        transition: color 0.3s ease;
      }

      .product-detail-content {
        display: flex;
        flex-direction: column; /* Default to column layout */
        gap: 3rem; /* Spacing between image/info */
        align-items: flex-start;
      }

      @media (min-width: 768px) {
        .product-detail-content {
          flex-direction: row; /* Row layout on larger screens */
          gap: 4rem; /* Increased gap for larger screens */
        }
      }

      /* Styling for the new product gallery */
      .product-gallery {
        flex: 1; /* Allow gallery to take space */
        display: flex;
        flex-direction: column;
        gap: 1rem;
        max-width: 100%; /* Ensure container doesn't exceed parent */
      }

      .main-image {
        width: 100%;
        border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow-md);
        border: 1px solid var(--border-color);
        transition: box-shadow 0.3s ease, border-color 0.3s ease;
      }

      .main-image img {
        display: block;
        width: 100%;
        height: auto; /* Maintain aspect ratio */
        object-fit: cover;
        max-height: 500px; /* Limit maximum height for large images */
      }

      .thumbnails {
        display: flex;
        gap: 0.75rem;
        overflow-x: auto; /* Allow horizontal scrolling if many thumbnails */
        padding-bottom: 0.5rem; /* Add padding for scrollbar */
      }

      .thumbnail {
        width: 80px; /* Set thumbnail size */
        height: 80px;
        object-fit: cover;
        border-radius: var(--radius-sm);
        border: 2px solid transparent; /* Default transparent border */
        cursor: pointer;
        transition: border-color 0.2s ease, transform 0.1s ease;
      }

      .thumbnail:hover {
        transform: scale(1.05);
      }

      .thumbnail.active {
        border-color: var(--primary-color); /* Highlight active thumbnail */
      }

      .product-info {
        flex: 1.5; /* Allow info section to take more space */
      }

      .product-info h1 {
        font-size: 2.8rem; /* Slightly larger title */
        font-weight: 800; /* Bolder title */
        margin-bottom: 1rem;
        color: var(--text-color);
        transition: color 0.3s ease;
      }

      [data-theme="dark"] .product-info h1 {
        color: var(--primary-color-dark-theme);
      }

      .product-info p {
        font-size: 1.1rem;
        line-height: 1.8; /* Increased line height for readability */
        color: var(--secondary-color);
        margin-bottom: 2.5rem; /* Increased bottom margin */
        transition: color 0.3s ease;
      }

      .product-features {
        list-style: none;
        padding: 0;
        margin-top: 2rem; /* Increased top margin */
        border-top: 1px solid var(--border-color); /* Added a subtle separator */
        padding-top: 1.5rem;
      }

      .product-features h3 {
        font-size: 1.4rem; /* Slightly larger features heading */
        font-weight: 700;
        margin-bottom: 1.2rem; /* Adjusted bottom margin */
        color: var(--text-color);
        transition: color 0.3s ease;
      }

      .product-features li {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 1rem; /* Increased margin between list items */
        color: var(--text-color);
        transition: color 0.3s ease;
      }

      .product-features li i {
        color: var(--primary-color); /* Use primary color for icons */
        font-size: 1.2rem; /* Slightly larger icons */
        transition: color 0.3s ease;
      }

      [data-theme="dark"] .product-features li i {
        color: var(--primary-color-dark-theme);
      }

      /* Back button styling */
      .back-button {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 2rem;
        color: var(--primary-color);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;
      }

      .back-button:hover {
        color: var(--primary-dark);
      }

      .back-button i {
        transition: transform 0.3s ease;
      }

      .back-button:hover i {
        transform: translateX(-5px);
      }

      /* Basic styling for loading and error states */
      #loading-state,
      #error-state {
        text-align: center;
        padding: 3rem;
        font-size: 1.2rem;
        color: var(--secondary-color);
        transition: color 0.3s ease;
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        background: var(--card-bg);
        margin-top: 2rem;
        box-shadow: var(--shadow-sm);
      }

      #error-state {
        color: #dc2626; /* Red color for error */
      }

      #loading-state::before {
        content: "..."; /* Simple loading indicator */
        display: block;
        font-size: 2em;
        margin-bottom: 1rem;
      }
    </style>
  </head>
  <body>
    <!-- Include the navigation bar -->
    <nav class="navbar">
      <a href="index.html" class="logo">
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M16 2L4 9V23L16 30L28 23V9L16 2Z"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></path>
          <path
            d="M16 2V30"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></path>
          <path
            d="M4 9L28 23"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></path>
          <path
            d="M28 9L4 23"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></path>
        </svg>
        BlueTrack
      </a>
      <ul class="nav-links">
        <li><a href="index.html#home">Home</a></li>
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#products">Products</a></li>
        <li><a href="index.html#services">Services</a></li>
        <li><a href="index.html#contact">Contact</a></li>
      </ul>
      <div class="burger">
        <div class="line1"></div>
        <div class="line2"></div>
        <div class="line3"></div>
      </div>
    </nav>

    <!-- Theme Toggle -->
    <button class="theme-toggle" aria-label="Toggle theme">
      <i class="fas fa-moon"></i>
    </button>

    <div class="product-detail-container">
      <a href="index.html#products" class="back-button"
        ><i class="fas fa-arrow-left"></i> Back to Products</a
      >
      <div id="product-detail-content" class="product-detail-content">
        <!-- Product details will be loaded here by JavaScript -->
        <div id="loading-state">Loading product details...</div>
        <div id="error-state" style="display: none">
          Error loading product details.
        </div>
        <!-- New structure for product details -->
        <div class="product-gallery">
          <div class="main-image">
            <img id="main-product-image" src="" alt="Product Image" />
          </div>
          <div class="thumbnails" id="product-thumbnails">
            <!-- Thumbnails will be loaded here by JavaScript -->
          </div>
        </div>
        <div class="product-info">
          <h1 id="product-name"></h1>
          <p id="product-description"></p>
          <div id="product-features">
            <h3>Features:</h3>
            <ul>
              <!-- Features will be loaded here by JavaScript -->
            </ul>
          </div>
          <!-- Add more product details here (e.g., price, specifications) -->
        </div>
      </div>
    </div>

    <script>
      // Get the product data from sessionStorage
      const selectedProductData = sessionStorage.getItem("selectedProduct");
      const productDetailsContainer = document.getElementById(
        "product-detail-content"
      );
      const loadingState = document.getElementById("loading-state");
      const errorState = document.getElementById("error-state");

      // Get the elements to populate
      const mainProductImage = document.getElementById("main-product-image");
      const productThumbnails = document.getElementById("product-thumbnails");
      const productName = document.getElementById("product-name");
      const productDescription = document.getElementById("product-description");
      const productFeaturesDiv = document.getElementById("product-features");

      if (selectedProductData) {
        try {
          const product = JSON.parse(selectedProductData);
          console.log("Displaying details for product:", product);

          // Hide loading state
          loadingState.style.display = "none";
          errorState.style.display = "none";

          // Populate product details
          productName.textContent = product.name || "Product Name";
          productDescription.textContent =
            product.description || "No description available.";

          // Populate features
          if (product.features && product.features.length > 0) {
            const featuresList = productFeaturesDiv.querySelector("ul");
            featuresList.innerHTML = product.features
              .map(
                (feature) => `
              <li><i class="fas fa-check-circle"></i> ${feature}</li>
            `
              )
              .join("");
            productFeaturesDiv.style.display = "block"; // Show features div
          } else {
            productFeaturesDiv.style.display = "none"; // Hide features div if no features
          }

          // Populate images
          if (product.images && product.images.length > 0) {
            // Set the main image initially
            mainProductImage.src = product.images[0];
            mainProductImage.alt = product.name || "Product Image";

            // Populate thumbnails
            product.images.forEach((imageSrc) => {
              const thumbnailImg = document.createElement("img");
              thumbnailImg.src = imageSrc;
              thumbnailImg.alt = product.name || "Product Thumbnail";
              thumbnailImg.classList.add("thumbnail");
              thumbnailImg.addEventListener("click", () => {
                mainProductImage.src = imageSrc;
              });
              productThumbnails.appendChild(thumbnailImg);
            });
          } else {
            // Handle case with no images
            mainProductImage.style.display = "none";
            productThumbnails.style.display = "none";
            // Optionally display a placeholder or message
          }
        } catch (error) {
          console.error(
            "Error parsing product data from sessionStorage:",
            error
          );
          loadingState.style.display = "none";
          errorState.style.display = "block";
          productDetailsContainer.innerHTML =
            "<p>Could not load product details.</p>";
        }
      } else {
        // If no data in sessionStorage, display an error or redirect
        console.warn("No product data found in sessionStorage.");
        loadingState.style.display = "none";
        errorState.style.display = "block";
        productDetailsContainer.innerHTML =
          '<p>No product data available. Please return to the <a href="index.html">homepage</a> to select a product.</p>';
      }

      // Navbar scroll effect (copy from index.html if you include the navbar)
      window.addEventListener("scroll", () => {
        const navbar = document.querySelector(".navbar");
        if (window.scrollY > 50) {
          navbar.classList.add("scrolled");
        } else {
          navbar.classList.remove("scrolled");
        }
      });

      // Mobile menu toggle (copy from index.html if you include the navbar)
      const burger = document.querySelector(".burger");
      const nav = document.querySelector(".nav-links");

      if (burger && nav) {
        // Check if elements exist
        burger.addEventListener("click", () => {
          nav.classList.toggle("active");
          burger.classList.toggle("toggle");
        });
      }

      // Theme Toggle (copy from index.html if you include the button)
      const themeToggleBtn = document.querySelector(".theme-toggle");
      const html = document.querySelector("html");
      const themeIcon = themeToggleBtn
        ? themeToggleBtn.querySelector("i")
        : null;

      // Check for saved theme preference on page load
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme) {
        html.setAttribute("data-theme", savedTheme);
        if (themeToggleBtn) updateThemeIcon(savedTheme); // Update icon only if button exists
      } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        // Default to system preference if no theme is saved
        html.setAttribute("data-theme", "dark");
        if (themeToggleBtn) updateThemeIcon("dark"); // Update icon only if button exists
      } else {
        html.setAttribute("data-theme", "light");
        if (themeToggleBtn) updateThemeIcon("light"); // Update icon only if button exists
      }

      // Function to update the theme icon
      function updateThemeIcon(theme) {
        if (theme === "dark") {
          themeIcon.classList.remove("fa-moon");
          themeIcon.classList.add("fa-sun");
        } else {
          themeIcon.classList.remove("fa-sun");
          themeIcon.classList.add("fa-moon");
        }
      }

      // Add event listener to the theme toggle button
      if (themeToggleBtn) {
        // Check if button exists
        themeToggleBtn.addEventListener("click", () => {
          const currentTheme = html.getAttribute("data-theme");
          const newTheme = currentTheme === "light" ? "dark" : "light";

          html.setAttribute("data-theme", newTheme);
          localStorage.setItem("theme", newTheme);
          updateThemeIcon(newTheme);
        });
      }
    </script>

    <!-- Include the footer -->
    <!-- <footer> ... </footer> -->
  </body>
</html>
